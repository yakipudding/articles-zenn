---
title: "MLOpsについて"
emoji: "✨"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["MLOps","SageMaker"]
published: true
---

最近MLOps流行ってるな～と去年くらいから勉強し始めて、勉強会に参加したりSageMaker試したりしたことをまとめてみる

## MLOpsとは
機械学習系のサービス開発は、アプリケーションの開発だけでなく、研究開発のフェーズがあったりモデルのライフサイクル管理があったりして、開発・運用サイクルがなかなか複雑になりがちです。しかも、それぞれで必要なスキルが異なり、全範囲をカバーしようとするとなかなか大変です

それを自動化できるところは自動化して、研究～開発～デプロイ～運用のサイクルをいい感じに自動化して回そうというものがMLOpsです。
ざっくり言うと、DevOpsの機械学習バージョンです。

## MLOpsの対象
MLOpsの対象はいろいろとありますが、データ前処理、学習・評価、モデルのデプロイの一連の流れをパイプラインで自動化する、というものが多いです。

これらを複合的なサービスを組み合わせて実現することになります。

最近はAWSのSageMakerやGCPのVertexAIといった機械学習向けのクラウドサービス群で構成されているものが多くなったように感じます。

## MLOpsのメリット
MLOpsを行うと何がうれしいか、というのは

- 再現性の担保
- 品質向上
- 本来やりたかった研究開発に集中できる

といったものがあります。

背景として、研究開発系の作業を個人の端末で行っていると、雑に管理してしまいどの検証がどの結果だったかわからなくなってしまうことがあります。
またみんなで同じようなスクリプトを作成していて無駄だったり、個人で作成したスクリプトが間違っていてそのまま使い続けてしまった、ということもあるかもしれません。

そういった対策として、MLOpsで実験管理をすることで、誰がいつどのような条件で検証を行い、どういう結果だったかも管理できて再現性が担保できます

他にも前処理に共通スクリプトを使うことで、各自が書かなくても勝手に実行して作成してくれるので、データ品質のばらつきを減らせます。

この結果、余計な時間に労力を費やすことを避けれるため、研究者は本来やりたかった研究開発に集中できる、というメリットがあります。

## MLOps基盤の構築について
とメリットを述べましたが、MLOpsの仕組みを構築するのは結構大変です。
MLOpsのサービスは様々なものがあるため、自分たちにとって何を使えばよいか選定する必要もありますし、それぞれ癖があるため使い方を勉強して試行錯誤しながら構築する必要があります。

例えば私はAWSのSageMakerを使っていますが、サービスが多すぎて何を使えばよいのか最初はわけがわかりませんでした。
そもそもSageMakerを使うためにVPC構成を設計しなければいけなかったりと、意外とハードルが高くて最初は苦労しました。
SageMakerのサービスについては[SageMakerのあれこれ](https://qiita.com/yakipudding/items/ca57b004faa919d41a17)に記載しています。

MLOpsエンジニアという専門職があるくらい、奥が深い領域です。

## MLOps基盤を構築する前に
そもそもMLOps基盤を構築するために、データ基盤を構築するほうが重要だったりします。
要はDB等から検証に必要なデータを持ってきて、必要に応じて加工し、RedshiftやBigQueryなどのDWHに置いたりして、研究で使えるようにしておくことです。
そもそもデータがないと研究開発はできないので当たり前と言えば当たり前ですが、ここがないとどうにもならないというのはあります。

## というわけで
MLOps、なかなか勉強するのは楽しいですが、なかなか大変なこともあります。
とはいえ界隈は盛り上がっていて勉強会もたくさん開催され、かなりオープンに知見が共有されているので、興味のある方は参加すると良いと思います！